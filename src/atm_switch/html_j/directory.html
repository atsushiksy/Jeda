<html>
<head>
</head>
<body>
<a href="test_plan.html">prev</a> : <a href="index.html">index</a> : <a href="portset.html">next</a>
<p><font size=+1>4. ディレクトリ構成とMakefile
</font>
<ul>
以下のディレクトリが、この例で使用されます。(実際に、この構成で、私は
設計検証を行なっています。)
<br>&nbsp;
<ul>
<li>
verilog</li>

<br>
このディレクトリには、Verilogの各種ファイルが含まれます。
<br>&nbsp;
<li>
include</li>

<br>
このディレクトリには、各種includeファイル(他のソースから自動生成されたものでないもの)が含まれます。
<br>&nbsp;
<li>
utils</li>

<br>
このディレクトリは、低レベルのドライバーや基本的なクラスなどを含みます。
また、これらのソースから(-h オプションで)自動生成されたヘッダーファイル
もこのディレクトリに置かれます。
<br>&nbsp;
<li>
suites</li>

<br>
このディレクトリは、main()関数を含む最上位レベルコードを含みます。
このコードは、テストベンチの初期化を行ないます。
異なった初期化を行なうために、複数の最上位レベルコードが存在することも
あります。
<br>&nbsp;
<li>
tests</li>

<br>
このディレクトリは、様々なテストケースが含まれます。各テストケースの
エントリとなる関数は、すべて同じ名前(本例では、squat_tet())で、main()
関数から呼び出されます。
各種のテストのための最終的な実行イメージ(.dlファイル)も、このディレクトリ
に作られます。
<br>&nbsp;
<li>
run</li>

<br>
このディレクトリは、Jedaの各種ファイルをコンパイルするためのMakefileを
含みます。また、シミュレーションの実行もこのディレクトリで行なわれます。
</ul>

<p><br>
runディレクトリにある<a href="../run/Makefile">Makefile</a>は、汎用的に
用いることが出来るもので、ディレクトリ構成が上記のようであれば、ファイル
名にかかわらず、使用することが出来ます。(GNU版のmakeが必要です)
<br>
Jedaのソースファイルは、.j のサフィックスで認識され、自動的にコンパイルと
リンクが行なわれます。
新しいテストを追加するためには、tests ディレクトリの下に、テストソース
ファイル( &lt;name>.j) を作成します。utilsのファイルでも同様です。
includeに置かれたファイルは、全てのソースに使用されるものとされます。
<br>
utils ディレクトリのファイルは、その名前によって &lt;name>_0.j、
&lt;name_1.j、&lt;name>_2.j の３つのグループに分類されます。
このファイル名の番号が参照関係を示していて、_0 を持つファイルは、他の
utils内のファイルを何も参照せず、_1 を持つファイルは _0 のファイルを
参照し、_2 のファイルは _0 と _1 のファイルを参照します。
このutilsディレクトリ内のソースを参照するためのヘッダーファイルは、
Jedaコンパイラによって自動的に生成されます。ファイル間の参照関係も
このグループ分けによって自動的に行なわれます。
<br>
このような汎用Makefileを使う場合の欠点は、
<br>&nbsp;
<ul>
<li>
コーディング途中の(あるいは不要の) .j ファイルは、make でエラーを発生させます。
</li>

<li>
全てのtestsディレクトリないのテストが、コンパイル/リンクされてしまいます。
もし特定のテストで作業している場合、特定の実行イメージのみを指定してmakeを
実行するほうが良いでしょう。(make ../tests/&lt;name>.dl)
</li>
</ul>

<p><br>
色々なプロジェクトを通じて統一されたディレクトリ構造をもつことは、
ほかのメンバーの作業内容を見る必要がある場合などに、非常に有効です。
つねに、ドライバーや低レベルクラスはutilsで見つけることができ、テスト
ケースは testsディレクトリにあります。
</ul>
<a href="test_plan.html">prev</a> : <a href="index.html">index</a> : <a href="portset.html">next</a>
</body>
</html>
